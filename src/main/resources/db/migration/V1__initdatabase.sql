-- noinspection SqlNoDataSourceInspectionForFile
create sequence assignments_seq start with 1 increment by 50;
create sequence competitions_seq start with 1 increment by 50;
create sequence ordered_assignments_seq start with 1 increment by 50;
create sequence teams_seq start with 1 increment by 50;
create table assignments (id bigint not null, assignment_descriptor varchar(255) not null, name varchar(255) not null, uuid binary not null, primary key (id));
create table competitions (id bigint not null, name varchar(255), uuid binary not null, primary key (id));
create table ordered_assignments (id bigint not null, idx integer not null, uuid binary not null, assignment_id bigint not null, competition_id bigint not null, primary key (id));
create table result (id bigint generated by default as identity, assignment varchar(255) not null, credit integer not null, penalty integer not null, score integer not null, team_id bigint not null, primary key (id));
create table teams (id bigint not null, company varchar(255), country varchar(255), cpassword varchar(255), name varchar(255) not null, password varchar(255), role varchar(255), primary key (id));
create table test (id bigint generated by default as identity, assignment varchar(255) not null, failure integer not null, success integer not null, test_name varchar(255) not null, team_id bigint not null, primary key (id));
alter table assignments add constraint UK_ithdg8thamq7j0keou3j5sa9q unique (assignment_descriptor);
alter table assignments add constraint UK_nkpv9h1bx072ri656x5cjopcl unique (name);
alter table assignments add constraint UK_nxtilobwq97h8wkh4he92d84t unique (uuid);
alter table competitions add constraint UK_rwn0axtw5j6xpv5jhllqn97op unique (uuid);
alter table ordered_assignments add constraint order_competition_unique unique (idx, competition_id);
alter table ordered_assignments add constraint UK_3ila99tcs90hq8093jjk0h62j unique (uuid);
alter table teams add constraint UK_a510no6sjwqcx153yd5sm4jrr unique (name);
alter table ordered_assignments add constraint FKgcmuqy71qdp48kgkm14pfsm04 foreign key (assignment_id) references assignments;
alter table ordered_assignments add constraint FK871cgc468ho2yx7otnhl7gs38 foreign key (competition_id) references competitions;
alter table result add constraint FK9k5goqkjpo1r0d4lgx3ri64w4 foreign key (team_id) references teams;
alter table test add constraint FKsi3mj2viku77f1oa7w9qpsh93 foreign key (team_id) references teams;
